### Практично-лабораторне заняття №4

## Реалізація нової сутності, створення CRUD-операцій та відповідного RESTful API

**Мета**

Закріпити навички створення повноцінної серверної логіки для роботи з
новою сутністю за допомогою TypeORM, Express та TypeDI. Ознайомитися з
процедурою створення міграцій, перевірки змін у структурі бази даних та
тестування REST API через Postman.

Генеруємо міграцію

![](./media/07a1aca9ab30f29139745406ea069e594fedde4a.png)

Був створений файл:

![](./media/cba67bfde38d35f9a8ea049f96d1a1f20720ce51.png)

Запускаємо міграцію:

![](./media/6d55bcd6d3e64c3e317e2212f02fdfec40bb733e.png)

У таблиці БД з\'явилась нова таблиця **test**

![](./media/91ae80f0bb310a8b5c5d0eacae94aafeeab68518.png)

Створюємо файл **list.ts** в каталозі
**/src/controllers/posts/lists.ts**

![](./media/1d779845b05d967e3540f6059eeb3f705d026d27.png)

![](./media/1cae1780017533660c6196796db855a36e13aa57.png)

#### 1. Створити нову сутність Post:

-   Визначити поля:

    -   id: UUID, первинний ключ

    -   title: рядок, обов'язковий

    -   content: текст, необов'язковий

    -   createdAt: дата створення, автоматично заповнюється

    -   updatedAt: дата оновлення, автоматично оновлюється

![](./media/40ffb6ebea17bce656295671a0c7dd8ea9e44a0f.png)

#### 2. Створити та застосувати міграцію:

-   Згенерувати міграцію для нової сутності.

> ![](./media/2d075fa3e8b5c66ca98a51af9028ad84040284f2.png)
>
> ![](./media/bcc192c95670bf6a394859539a8da47615c1659e.png)

-   Запустити міграцію через CLI.

> ![](./media/95bc42ecaf32115b93aeb59032d7094c37f50b2e.png)

-   Перевірити у базі даних (наприклад, через pgAdmin або консоль), що
    структура таблиці відповідає очікуваній.

![](./media/3dc972fbe30aac144081f82093501920621e7e7d.png)

![](./media/1e1052e87958ffd05aee049d239ba73fa98fc739.png)

#### 3. Реалізувати RESTful API для CRUD-операцій:

-   **C**reate: створення нового поста

![](./media/18d6ee2680b2f75ddf41c45a6ec466920d00bdb7.png)

-   **R**ead:

    -   отримання всіх постів

![](./media/91717f9e036200b8b91f1ec3c68830328e316c90.png)

-   отримання одного поста за ID

![](./media/1698db856fc26e5145af67907fdc77beaee91b0c.png)

-   **U**pdate: оновлення поста за ID

![](./media/b7d6068527ab6cccf9bd21dbf2c3f05539449e55.png)

-   **D**elete: видалення поста за ID

![](./media/516eae0933442eb45c9997e57cf1a54cd26fab0f.png)

-   Використовувати контролер, DTO, роутер та сервіс за прикладом
    реалізації для User.

Index.ts

![](./media/a05824aa37b580c6d2e19183029b0cd07f8c300e.png){

Index.ts

![](./media/bde2be24b3b703db39e5da501d36300855662757.png)

Routes/v1/posts.ts

![](./media/52e7389553a4cec437c2fcd44ba69e6b449ac481.png){

#### **5. Протестувати REST API через Postman:**

-   Створити окрему колекцію для запитів.

-   Додати приклади:

    -   створення поста,

> ![](./media/3b2ba6267436eab1275b19d7aac3183d7694bf75.png)

-   отримання всіх постів,

> ![](./media/de44308c7c60e79b7d41a84e43768a271d6b7392.png)

-   отримання поста за ID,

> ![](./media/077926e72fa95767d76f53fa3e2c01c3bc667f9d.png)

-   оновлення поста,

> ![](./media/33f1264fe6fff44c29df68019954f6ca39b6aaef.png)
>
> ![](./media/a321e54618ba25aee9a5f14dcd4b93a72c6a6c04.png){

-   видалення поста,

![](./media/633bfdcb3ef8f9a23d4e85e966599552e9ba0004.png)

Висновок:

Закріпив навички створення повноцінної серверної логіки для роботи з
новою сутністю за допомогою TypeORM, Express та TypeDI. Ознайомився з
процедурою створення міграцій, перевірки змін у структурі бази даних та
тестування REST API через Postman.

p
